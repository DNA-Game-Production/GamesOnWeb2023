{"version":3,"file":"time.js","names":["Animation","night_monster_list","light","hour","updateHour","hourInput","value","values","dispose","clear","intensity","smoothLightTransition","start","end","CreateAndStartAnimation","ANIMATIONLOOPMODE_CONSTANT"],"sources":["../../../src/clients/babylon/time.ts"],"sourcesContent":["import { Animation } from \"babylonjs\";\r\nimport { night_monster_list } from \"../connectionWS\";\r\nimport { light } from \"./scene\";\r\n\r\nexport var hour: number\r\n\r\nexport function updateHour(hourInput: number) {\r\n    // console.log(\"updating time to \" + hourInput);\r\n    hour = hourInput;\r\n\r\n    //tue les monstres de nuit si il fait jour\r\n    if (hour > 7 && hour < 22) {\r\n        for (const value of night_monster_list.values()) {\r\n            value.dispose();\r\n        }\r\n        night_monster_list.clear();\r\n    }\r\n\r\n    //pleine nuit\r\n    if (hour > 23 || hour < 5) { light.intensity = 0.2; }\r\n\r\n    //levée du jour\r\n    else if (hour >= 5 && hour <= 11) { smoothLightTransition(light.intensity, (hour - 3) / 10); }\r\n\r\n    //journée\r\n    else if (hour > 11 && hour < 17) { light.intensity = 0.8; }\r\n\r\n    //couché du soleil\r\n    else if (hour >= 17 && hour <= 23) { smoothLightTransition(light.intensity, (25 - hour) / 10); }\r\n}\r\n\r\nfunction smoothLightTransition(start: number, end: number) {\r\n    Animation.CreateAndStartAnimation(\"animMove\", light, \"intensity\", 60, 60, start, end, Animation.ANIMATIONLOOPMODE_CONSTANT);\r\n\r\n}"],"mappings":"AAAA,OAASA,SAAT,KAA0B,WAA1B,CACA,OAASC,kBAAT,KAAmC,iBAAnC,CACA,OAASC,KAAT,KAAsB,SAAtB,CAEA,MAAO,IAAIC,KAAJ,CAEP,MAAO,SAASC,WAAT,CAAoBC,SAApB,CAAuC,CAE1CF,IAAI,CAAGE,SAAP,CAGA,GAAIF,IAAI,CAAG,CAAP,EAAYA,IAAI,CAAG,EAAvB,CAA2B,CACvB,IAAK,KAAMG,MAAX,GAAoBL,mBAAkB,CAACM,MAAnB,EAApB,CAAiD,CAC7CD,KAAK,CAACE,OAAN,EACH,CACDP,kBAAkB,CAACQ,KAAnB,EACH,CAGD,GAAIN,IAAI,CAAG,EAAP,EAAaA,IAAI,CAAG,CAAxB,CAA2B,CAAED,KAAK,CAACQ,SAAN,CAAkB,GAAM,CAArD,IAGK,IAAIP,IAAI,EAAI,CAAR,EAAaA,IAAI,EAAI,EAAzB,CAA6B,CAAEQ,qBAAqB,CAACT,KAAK,CAACQ,SAAP,CAAkB,CAACP,IAAI,CAAG,CAAR,EAAa,EAA/B,CAAqC,CAAzF,IAGA,IAAIA,IAAI,CAAG,EAAP,EAAaA,IAAI,CAAG,EAAxB,CAA4B,CAAED,KAAK,CAACQ,SAAN,CAAkB,GAAM,CAAtD,IAGA,IAAIP,IAAI,EAAI,EAAR,EAAcA,IAAI,EAAI,EAA1B,CAA8B,CAAEQ,qBAAqB,CAACT,KAAK,CAACQ,SAAP,CAAkB,CAAC,GAAKP,IAAN,EAAc,EAAhC,CAAsC,CACnG,CAED,QAASQ,sBAAT,CAA+BC,KAA/B,CAA8CC,GAA9C,CAA2D,CACvDb,SAAS,CAACc,uBAAV,CAAkC,UAAlC,CAA8CZ,KAA9C,CAAqD,WAArD,CAAkE,EAAlE,CAAsE,EAAtE,CAA0EU,KAA1E,CAAiFC,GAAjF,CAAsFb,SAAS,CAACe,0BAAhG,CAEH"}