{"version":3,"file":"tools.js","names":["Axis","Color3","Mesh","MeshBuilder","StandardMaterial","Vector3","AdvancedDynamicTexture","Rectangle","TextBlock","scene","makeid","length","result","characters","charactersLength","i","charAt","Math","floor","random","distance","a","b","sqrt","x","y","z","removeFromList","elt","l","pos","indexOf","splice","getTime","today","Date","hours","getHours","toString","minutes","getMinutes","time","isVector3Equal","v1","v2","createLabel","text","mesh","plane","CreatePlane","size","billboardMode","BILLBOARDMODE_Y","position","advancedTexture","CreateForMesh","rect1","width","height","cornerRadius","color","thickness","background","addControl","linkWithMesh","linkOffsetY","label","fontSize","outlineWidth","outlineColor","createWall","wall","CreateBox","depth","rotate","X","PI","checkCollisions","wallMaterial","diffuseColor","material"],"sources":["../../../src/clients/babylon/tools.ts"],"sourcesContent":["import { Axis, Color3, Mesh, MeshBuilder, StandardMaterial, Vector3 } from \"babylonjs\";\r\nimport { AdvancedDynamicTexture, Rectangle, TextBlock } from \"babylonjs-gui\";\r\nimport { Avatar } from \"./avatars/avatar\";\r\nimport { scene } from \"./main\";\r\n\r\nexport function makeid(length: number) {\r\n    var result = '';\r\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    var charactersLength = characters.length;\r\n    for (var i = 0; i < length; i++) {\r\n        result += characters.charAt(Math.floor(Math.random() *\r\n            charactersLength));\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function distance(a: Vector3, b: Vector3) {\r\n    return Math.sqrt((a.x - b.x) ** 2 + (a.y - b.y) ** 2 + (a.z - b.z) ** 2);\r\n}\r\n\r\n/** Remove elt from L with side effect */\r\nexport function removeFromList<T>(elt: T, l: T[]) {\r\n    let pos = l.indexOf(elt)\r\n    if (pos >= 0) l.splice(pos, 1)\r\n}\r\n\r\n\r\nexport function getTime() {\r\n    var today = new Date();\r\n    var hours = today.getHours().toString()\r\n    var minutes = today.getMinutes().toString()\r\n    var time = \"[\" + (hours.length === 2 ? '' : '0') + hours + \":\" + (minutes.length === 2 ? '' : '0') + minutes + \"]\";\r\n    return time\r\n}\r\n\r\nexport function isVector3Equal(v1: Vector3, v2: Vector3) {\r\n    return (v1.x === v2.x) && (v1.y === v2.y) && (v1.z === v2.z)\r\n}\r\n\r\n\r\nexport var createLabel = function (text: string, mesh: Avatar) {\r\n    var plane = MeshBuilder.CreatePlane(\"plane\", { size: 5 }, scene);\r\n    plane.billboardMode = Mesh.BILLBOARDMODE_Y;\r\n    plane.position.y = 1.5;\r\n\r\n    var advancedTexture = AdvancedDynamicTexture.CreateForMesh(plane);\r\n\r\n    var rect1 = new Rectangle();\r\n    rect1.width = 1;\r\n    rect1.height = 1;\r\n    rect1.cornerRadius = 20;\r\n    rect1.color = \"White\";\r\n    rect1.thickness = 0;\r\n    rect1.background = \"transparent\";\r\n    advancedTexture.addControl(rect1);\r\n    rect1.linkWithMesh(mesh);\r\n    rect1.linkOffsetY = -80;\r\n\r\n    const label = new TextBlock();\r\n    label.text = text;\r\n    label.color = \"white\"\r\n    rect1.addControl(label);\r\n    label.fontSize = 80;\r\n\r\n    label.outlineWidth = 10;\r\n    label.outlineColor = \"black\";\r\n    return plane\r\n}\r\n\r\n\r\nexport function createWall() {\r\n    let wall = MeshBuilder.CreateBox(\"wall\", { height: 20, width: 2, depth: 0.2 }, scene);\r\n    wall.position = new Vector3(1, 1, 5)\r\n    wall.rotate(Axis.X, Math.PI / 2.5)\r\n    wall.checkCollisions = true;\r\n\r\n    var wallMaterial = new StandardMaterial(\"wallMat\", scene);\r\n\r\n    wallMaterial.diffuseColor = new Color3(0.6, 0.165, 0.11);\r\n    wall.material = wallMaterial;\r\n}"],"mappings":"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"}